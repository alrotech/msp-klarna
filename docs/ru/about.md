#### Платежная система Klarna

**[Klarna](https://www.klarna.com/)** — это ведущая глобальная служба платежей и покупок, обеспечивающая более разумные и гибкие возможности совершения покупок для 90 миллионов активных потребителей в более чем 250 000 торговых точек в 17 странах. Klarna предлагает прямые платежи, варианты оплаты после доставки и рассрочку в удобном режиме покупки в один клик, который позволяет потребителям платить, когда и как они предпочитают.

#### Возможности модуля интеграции

Модуль **mspKlarna** позволяет передавать информацию о заказе из **miniShop2** в платежную систему **Klarna**, а так же обрабатывать запросы со стороны платежной системы, и менять статусы заказа в соответствии с настройками.

Поддерживается только вариант с отдельной платежной страницей (Hosted Page в терминах платежной системы), так как это наиболее точно соответствует модели работы miniShop. Есть возможность отправлять ссылку на оплату в письме, так как реализован метод <kbd>getPaymentLink</kbd>.

В настройках модуля можно дополнительно настроить регион, страну плательщика, валюту платежа и другие параметры, необходимые для заключения сделки между интернет-магазином и покупателем.

#### Новости и обновления

Значимые обновления будут публиковаться на сайте сообщества <a href="https://modx.pro/">modx.pro</a> в виде анонсов, подробные же изменения всегда можно найти в <a href="https://modstore.pro/packages/payment-system/mspklarna#tab/changelog">списке изменений</a>.

- <a href="https://modx.pro">Новый модуль интеграции для платежной системы Klarna</a>.

#### Установка, настройка и использование

Установка модуля осуществляется через административную часть вашего сайта на MODX. Для установки модуля необходимо перейти в раздел <em>Пакеты</em> и далее в <em>Установщик</em> главного меню, <a href="https://modstore.pro/info/connection">подключить репозиторий modstore.pro</a>, выбрать из списка пакетов <kbd>mspKlarna</kbd> и следовать дальнейшим инструкциям установщика.

Описание процесса установки и настройки компонента, а так же справка по всем доступным параметрам конфигурации, доступна в <a href="https://docs.modx.pro/komponentyi/minishop2/moduli-oplatyi/mspklarna">подробной документации</a>.

Быстро проверить работу модуля можно используя компонент <a href="https://modx.com/extras/package/console">Console</a> (или <a href="https://modstore.pro/packages/utilities/modalconsole">modalConsole</a>). Откройте окно компонента <kbd>Console</kbd> и выполните приведенный ниже код.

<code>
require_once MODX_CORE_PATH . 'components/mspklarna/model/msppaymo/msppaymohandler.class.php';
$oid = 1; # id заказа
if ($order = $modx->getObject('msOrder', $order_id)) {
$handler = new mspKlarnaH($order);
echo $handler->getPaymentLink($order); # ссылка на оплату или ошибка в логе в случае неудачи
}</code>

В ответ вы должны получить ссылку, по которой откроется окно оплаты, либо сообщение об ошибке, если настройка модуля была выполнена неправильно.

#### Техническая поддержка

Для получения технической поддержки по этому модулю возпользуйтесь <a href="https://modstore.pro/office/support">специальной формой</a> (доступна после авторизации). Техническая поддержка осуществляется согласно <a href="https://modstore.pro/info/rules">правилам</a> <strong>modstore</strong>.
